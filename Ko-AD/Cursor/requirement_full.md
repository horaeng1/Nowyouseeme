## 1. 서비스 개요

- **서비스 목적**
    - 시각장애인 및 저시력 이용자를 위해, 영상의 시각 정보를 자동 분석·요약하여 **대사(대화)와 겹치지 않는 구간에 화면해설(Audio Description, AD)을 삽입**하는 서비스 제공.
- **핵심 가치**
    - 영상 제작자/플랫폼이 **추가 인력 없이도 AD 트랙을 자동 생성**할 수 있도록 지원.
    - 시각장애인 이용자가 **대중 영상 콘텐츠(영화, 드라마, 유튜브 등)에 더 쉽게 접근**할 수 있도록 함.

---

## 2. 대상 사용자 및 이해관계자

1. **최종 이용자**
    - 시각장애인, 저시력 이용자
    - AD 지원 영상이 필요한 일반 이용자 (학습 목적, 운전 중 청취 등)
2. **직접 사용자(클라이언트)**
    - OTT 플랫폼, 방송사, 영화 배급사
    - 유튜브/숏폼 크리에이터 및 MCN
    - 공공기관/교육기관(홍보/교육 영상에 AD 필요)
3. **내부 이해관계자**
    - 서비스 운영자 (콘텐츠 온보딩, 모니터링)
    - AD 품질 검수자(내부/외주 옵저버)
    - 모델/인프라 엔지니어

---

## 3. 범위(Scope)

### 3.1 In-Scope

- 영상 파일(또는 URL) 입력 후:
    1. **대사/대화 구간 자동 검출** (ASR 기반)
    2. **대사와 겹치지 않는 구간(AD 후보 구간) 자동 산출**
    3. **화면 시각 정보 자동 분석**
        - 주요 인물/객체/행동/장면/자막 텍스트 등
    4. **AD 텍스트 자동 생성**
        - 한국어 기준, AD 스타일 가이드 준수(현재 시제, 객관적 묘사 위주 등)
        - 가용 시간(구간 길이)에 맞게 문장 길이 제약
    5. **TTS로 AD 오디오 생성**
    6. **원본 오디오와 AD 오디오의 자동 믹싱 또는 별도 AD 트랙 생성**
    7. **웹 기반 편집/리뷰 UI**
        - 타임라인에서 AD 구간/문장 확인 및 수정
        - 재생 시 AD 온/오프 및 볼륨 조정
    8. **결과물 Export**
        - AD 포함 영상 파일
        - AD 스크립트(SRT/VTT/JSON 등)
        - AD 오디오 트랙만 별도 추출(선택)

### 3.2 Out-of-Scope (1차 버전 기준)

- 실시간 방송(라이브 스트리밍)에 대한 실시간 AD 삽입
- 다국어 AD 동시 생성 (초기에는 한국어 기준)
- 사용자 음성 녹음 기반의 수동 AD 녹음/편집 툴
- 영상 내 등장 인물의 화자 인식/동일 인물 추적 고도 기능(필요 시 향후 범위 확장)

---

## 4. 주요 유스케이스

1. **UC-01: 영상 1편에 대해 AD 자동 생성**
    - Input: mp4 등 동영상 파일 1개
    - Flow:
        1. 사용자가 웹 콘솔/페이지에서 영상 업로드
        2. 시스템이 영상 분석 및 AD 자동 생성 진행
        3. AD 초안 텍스트/오디오 확인
        4. 필요 시 문장 수정 후 재생성(TTS)
        5. 결과 Export
    - Success: AD가 삽입된 영상 파일 + AD 스크립트/오디오 획득
2. **UC-02: 시리즈/플레이리스트 일괄 처리**
    - Input: 에피소드/영상 다수
    - Flow: UC-01의 배치 버전 (큐잉 후 순차 처리)
3. **UC-03: AD 품질 검수 및 피드백 반영**
    - 검수자가 웹 UI에서 각 AD 구간을 수정/코멘트
    - 수정 이력/버전 관리 (v1, v2, …)
4. **UC-04: 시각장애인 사용자의 재생 경험**
    - AD 트랙이 포함된 영상을 재생 플레이어에서 AD on/off
    - AD 음량/속도 조절 (플레이어 연동 시)

---

## 5. 기능 요구사항 (Functional Requirements)

### 5.1 입력 및 전처리

- **FR-01**: 시스템은 사용자가 업로드한 영상 파일을 수신하고, 메타데이터(길이, 해상도, 프레임레이트, 오디오 채널 수)를 추출해야 한다.
- **FR-02**: 지원 포맷(예: mp4, mov, mkv 등) 리스트를 관리하고, 미지원 포맷은 업로드 단계에서 에러로 처리해야 한다.
- **FR-03**: 필요 시 서버 내부에서 분석용 저해상도 프록시(예: 720p)로 자동 변환할 수 있어야 한다.
- **FR-04** : 시스템은 Youtube URL을 입력받아, 해당 영상을 입력으로 사용할 수 있어야 한다.
- **FR-05** : description 성능을 최대한 유지한 상태로 api 사용하는 토큰을 최대한 줄여야 한다.

### 5.2 음성 분석 / 대사 구간 검출

- **FR-10**: 시스템은 영상의 오디오 트랙으로부터 **자동 음성 인식(ASR)** 을 수행하여, 타임스탬프 포함 대사 스크립트를 생성해야 한다.
- **FR-11**: 시스템은 대사 구간(사람 말이 존재하는 구간)과 무음/배경음 구간을 구분해야 한다.
- **FR-12**: 시스템은 **대사/나레이션과 중복되지 않는 AD 후보 구간**을 계산해야 한다.
    - AD 후보 구간은 최소/최대 길이(예: 최소 1초, 최대 5초 등) 정책을 적용할 수 있어야 한다.

### 5.3 시각 정보 분석

- **FR-20**: 시스템은 각 AD 후보 구간에 대해 대표 프레임(또는 샘플 프레임 시퀀스)을 추출해야 한다.
- **FR-21**: 시스템은 추출된 프레임으로부터 다음 정보를 탐지할 수 있어야 한다(정확도/성능은 버전에 따라 단계적):
    - 주요 인물/객체(예: 사람, 차량, 동물, 사물 등)
    - 장면/배경(실내/실외, 장소 느낌 정도)
    - 시각적으로 뚜렷한 행동/동작 (걷는다, 앉는다, 문을 연다 등)
    - 화면에 표시된 텍스트(간판, 자막, 메시지 등)
- **FR-22**: 시각 정보 분석 결과는 AD 생성 모듈이 활용할 수 있도록 구조화된 형태(예: JSON)로 저장해야 한다.

### 5.4 AD 텍스트 생성

- **FR-30**: 시스템은 AD 후보 구간별로 **한국어 AD 문장**을 자동 생성해야 한다.
- **FR-31**: AD 문장은 사전에 정의된 스타일 가이드(예: 현재 시제, 객관적 묘사, 추측/감정 표현 최소화, 1~2문장 제한 등)를 가능하면 준수해야 한다.
- **FR-32**: 시스템은 각 AD 문장의 예상 발화 시간을 계산하여, **해당 AD 후보 구간 길이를 초과하지 않도록** 문장 길이를 제한하거나 문장 수를 조절해야 한다.
- **FR-33**: 직전/인접 AD와 내용이 불필요하게 반복되지 않도록, 일정 수준의 중복 제거 로직(예: 최근 N초 내 등장 내용은 요약/생략)을 적용해야 한다.
- **FR-34**: 시스템은 AD 텍스트를 검수자가 수정할 수 있도록 UI에 제공해야 한다.
- **FR-35**: 시스템은 최선의 AD 텍스트를 제공해야 한다.
- **FR-36**: 시스템은 빠른 시간 내에 AD 텍스트를 사용자에게 제공해야 한다.
- **FR-37**: 시스템은 경쟁 업체들에 준하거나 상응하는 성능을 제공해야 한다.

### 5.5 TTS 및 오디오 트랙 생성

- **FR-40**: 시스템은 AD 텍스트를 지정된 TTS 엔진을 통해 오디오로 변환해야 한다.
- **FR-41**: TTS 음색(성별, 톤)과 속도는 프로젝트 단위로 설정 가능해야 한다.
- **FR-42**: AD 오디오는 원본 영상 오디오 타임라인 상 **대사와 겹치지 않는 위치**에 배치되어야 한다.
- **FR-43**: 시스템은 다음 모드를 지원할 수 있어야 한다.
    - AD 오디오를 **별도 오디오 트랙**으로 추가
    - AD 오디오를 **기존 오디오와 믹스한 단일 트랙** 생성

### 5.6 편집/리뷰 UI

- **FR-50**: 웹 UI 상에서 타임라인 형태로 대사 구간과 AD 구간을 시각화해야 한다.
- **FR-51**: 사용자는 각 AD 구간을 선택하여 텍스트를 수정할 수 있어야 한다.
- **FR-52**: 사용자는 수정된 텍스트에 대해 TTS 재생성(재합성)을 요청할 수 있어야 한다.
- **FR-53**: 사용자는 영상 재생 중 AD on/off 및 AD 볼륨(상대 볼륨)을 조절할 수 있어야 한다 (자체 플레이어나 클라이언트 플레이어 연동 기준 결정 필요).
- **FR-54**: AD 수정 이력을 버전 단위로 관리해야 한다 (예: v1, v2…).
- **FR-55** : 사용자는 AD/ TTS 기능에 대하여 언어를 선택할 수 있어야 한다.
    - 영어, 한국어 등

### 5.7 Export 및 연동

- **FR-60**: 시스템은 다음 출력 형식을 지원해야 한다.
    - AD 포함 영상(mp4 등)
    - AD 오디오 트랙만 별도 파일(wav, m4a 등)
    - AD 스크립트: SRT/VTT/JSON
- **FR-61**: API 방식으로 외부 플랫폼(OTT, CMS 등)과 연동할 수 있어야 한다(후순위).

---

## 6. 비기능 요구사항 (Non-Functional Requirements)

### 6.1 성능/처리 시간

- **NFR-01**: 기준 하드웨어/환경에서 **1시간 분량의 영상** 처리 시간 목표를 설정 (예: 30분 이내 배치 처리)하고, 파일 길이에 대해 선형 수준의 스케일링을 보장해야 한다.
- **NFR-02**: 동시 처리 가능한 영상 수(동시 작업 수)의 최소 기준을 정하고, 큐 기반으로 처리 상태(대기/진행/완료)를 노출해야 한다.

### 6.2 품질

- **NFR-10**: AD와 대사가 겹치는 비율(시간 기준)은 일정 임계값(예: 전체 AD 시간의 5% 이하) 이하가 되도록 설계해야 한다.
- **NFR-11**: AD 텍스트 품질은 내부 평가 기준(가독성, 정보량, 스타일 준수도 등)에 따라 측정하고, 개선 가능하도록 로그/샘플을 축적해야 한다.

### 6.3 안정성 및 운영

- **NFR-20**: 작업 도중 오류 발생 시, 재시작 가능 지점(예: “분석 완료, AD 생성 단계부터 재시작”)을 남겨야 한다.
- **NFR-21**: 각 처리 단계(음성 분석, 시각 분석, AD 생성, TTS, 믹싱)에 대한 로그와 메트릭을 수집해야 한다.

### 6.4 보안/접근성

- **NFR-30**: 업로드된 영상과 생성된 AD 데이터는 암호화 저장 및 전송(HTTPS, 적절한 저장소 암호화)을 준수해야 한다.
- **NFR-31**: 웹 UI는 스크린 리더 사용자를 고려한 접근성(ARIA 속성, 키보드 탐색 지원 등)을 갖춰야 한다.
- **NFR-32**: 일정 기간 사용하지 않는 원본/중간 결과물은 자동 삭제 정책을 운영해야 한다.

---

## 7. 데이터 및 포맷 요구사항

- **DR-01**: 입력 영상 포맷, 최대 용량, 최대 길이(분 단위) 등 기술적 제한 정의.
- **DR-02**: AD 스크립트 포맷(SRT/VTT/JSON)의 필드 정의
    - (start_time, end_time, text, speaker(optional), scene_id 등)
- **DR-03**: 내부 저장용 메타데이터 스키마 정의
    - 영상 ID, 처리 상태, 실패 원인, 버전 정보, AD 품질 태그 등.

---

## 8. 제약사항 및 가정

- 초기 버전은 **한국어 오디오/한국어 AD** 를 우선 지원하고, 다국어 지원은 후순위.
- 저사양 영상(낮은 해상도, 낮은 비트레이트)에서도 동작 가능해야 하나, 품질 저하에 대한 면책 조항 필요.
- 외부 상용 TTS/ASR API 사용 시, 라이선스/비용 구조를 고려한 호출량 제한 필요.

## Release Note

### v0.2 (2025-11-19)

- FR-55 추가
- FR-04 추가