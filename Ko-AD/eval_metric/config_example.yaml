# AD Evaluation Configuration
# ===========================
#
# 사용법:
#   python -m eval_metric --config eval_metric/config_example.yaml --all-metrics
#
# --all-metrics 사용 시:
#   - 기본: bertscore, meteor, cider
#   - llm.api_key 설정 시: LLM 평가 자동 포함
#   - critic.characters 또는 critic.characters_file 설정 시: CRITIC 평가 자동 포함

# 입력 파일 설정
generated_file: "/Users/yul/Dev/geminitest/About.Time.2013.1080p.BluRay.x264.YIFY_part001_0s_to_600s_20251125_145912.json"
reference_file: "/Users/yul/Dev/geminitest/movie_2913_About_Time.csv"

# 매칭 설정
matcher:
  method: cluster          # cluster, dp, overlap
  min_overlap_sec: 0.5
  
  # DP 매칭 전용 설정
  w_time: 0.3
  w_text: 0.7
  gap_penalty_gen: -0.2
  gap_penalty_ref: -0.2
  time_scale: 10.0
  time_soft: true

# LLM 평가 설정 (Gemini)
llm:
  api_key: "AIzaSyCe_YchQjmFJfkHBQ6vdY821jFK-WuwZg8"  # 여기에 실제 API 키 입력 또는 null로 설정
  # api_key: null  # null이면 GEMINI_API_KEY 환경변수 사용
  model: gemini-2.5-flash
  max_retries: 3
  retry_delay: 2.0

# BERTScore 설정
bertscore:
  model: roberta-large
  device: null             # null이면 자동 감지, 또는 'cuda:0', 'cpu'
  batch_size: 64
  rescale_with_baseline: false

# METEOR 설정
meteor:
  alpha: 0.9
  beta: 3.0
  gamma: 0.5

# CIDEr 설정
cider:
  n_gram: 4
  sigma: 6.0

# CRITIC 설정 (캐릭터 식별)
# 캐릭터를 지정하지 않으면 reference AD에서 자동 추출 (spaCy NER 사용)
critic:
  # 방법 1: 직접 캐릭터 리스트 지정
  # characters:
  #   - Tim
  #   - Mary
  #   - Dad
  #   - Kit Kat
  #   - Charlotte
  #   - Harry
  # 방법 2: JSON 파일로 지정
  # characters_file: "/path/to/characters.json"
  # 방법 3: 둘 다 비워두면 reference AD에서 자동 추출
  characters: []
  device: cpu              # 'cuda:0' for GPU

# 출력 설정
output:
  output_dir: null         # null이면 생성 파일과 같은 디렉토리
  save_detailed_csv: true
  save_summary_json: true
  include_timestamp: true

# 실행할 메트릭 (비어있으면 --all-metrics 또는 --metric 옵션 필요)
# 설정하면 --all-metrics 무시하고 이 리스트 사용
evaluators: []
# evaluators:
#   - bertscore
#   - meteor
#   - cider
#   - llm
#   - critic
